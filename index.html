<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI MAKER HUB - BYPASS VERSION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        body { background: #0d1117; color: #c9d1d9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 16px; }
        .glow-blue:focus { border-color: #58a6ff; box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.3); }
        .loading-bar { height: 2px; width: 100%; background: linear-gradient(90deg, transparent, #58a6ff, transparent); background-size: 200% 100%; animation: loading 1.5s infinite linear; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="p-4 min-h-screen">

    <div id="app" class="max-w-lg mx-auto">
        
        <div id="screen-home" class="space-y-4">
            <div class="text-center py-8">
                <h1 class="text-4xl font-black text-white tracking-tight">AI MAKER</h1>
                <p class="text-blue-500 font-bold text-xs tracking-widest uppercase">Premium Generator</p>
            </div>

            <div class="grid gap-3">
                <button onclick="showScreen('screen-settings')" class="card p-4 flex justify-between items-center hover:bg-[#21262d] transition">
                    <span class="font-bold text-sm">⚙️ SETTINGS</span>
                    <div id="status-chip" class="text-[10px] bg-red-900 text-red-200 px-2 py-1 rounded">KEY MISSING</div>
                </button>

                <div class="pt-4 grid gap-3">
                    <button onclick="openMaker('ROBLOX LUA MAKER')" class="card p-5 text-left font-bold hover:border-blue-500 transition">ROBLOX CUSTOM LUA MAKER</button>
                    <button onclick="openMaker('GROWTOPIA LUA MAKER')" class="card p-5 text-left font-bold hover:border-green-500 transition">GROWTOPIA CUSTOM LUA MAKER</button>
                    <button onclick="openMaker('IMAGE PROMPT MAKER')" class="card p-5 text-left font-bold hover:border-purple-500 transition">AI MAKER CUSTOM IMAGE</button>
                    <button onclick="showScreen('screen-converter')" class="card p-5 text-left font-bold hover:border-yellow-500 transition">AI CONVERTER</button>
                    <button onclick="showScreen('screen-gtps')" class="card p-5 text-left font-bold hover:border-orange-500 transition">AI GTPS LUA MAKER</button>
                </div>
            </div>
        </div>

        <div id="screen-settings" class="hidden space-y-4">
            <button onclick="showScreen('screen-home')" class="text-sm text-gray-400">← Kembali</button>
            <h2 class="text-xl font-bold text-white">Konfigurasi</h2>
            <div class="card p-6 space-y-4">
                <div>
                    <label class="text-xs font-bold text-gray-500 uppercase">Gemini API Key</label>
                    <input type="password" id="api-key" placeholder="Paste key di sini..." class="w-full mt-2 p-3 rounded-lg bg-black border border-[#30363d] glow-blue outline-none text-sm">
                </div>
                <button onclick="saveConfig()" class="w-full bg-blue-600 hover:bg-blue-500 p-4 rounded-xl font-bold text-white transition">SIMPAN</button>
            </div>
        </div>

        <div id="screen-maker" class="hidden space-y-4">
            <div class="flex items-center gap-3">
                <button onclick="showScreen('screen-home')" class="p-2 card text-xs">← BACK</button>
                <h2 id="maker-title" class="font-bold text-sm text-blue-400 uppercase tracking-wider"></h2>
            </div>
            
            <div id="ai-loading" class="hidden loading-bar rounded"></div>

            <div class="space-y-4">
                <textarea id="prompt-input" rows="6" class="w-full card p-4 glow-blue outline-none text-sm" placeholder="Ketik permintaan anda..."></textarea>
                
                <button onclick="generateAI()" id="gen-btn" class="w-full bg-white text-black p-4 rounded-xl font-black uppercase tracking-widest hover:bg-gray-200 transition">GENERATE</button>

                <div class="space-y-2">
                    <div class="flex justify-between items-center text-[10px] font-bold text-gray-500">
                        <span>HASIL:</span>
                        <button onclick="copyResult()" class="text-blue-500">COPY CODE</button>
                    </div>
                    <pre id="output-area" class="card p-4 font-mono text-[11px] text-green-400 overflow-x-auto min-h-[250px] whitespace-pre-wrap bg-[#010409]">Menunggu input...</pre>
                </div>
            </div>
        </div>

        <div id="screen-gtps" class="hidden space-y-4 text-center">
            <button onclick="showScreen('screen-home')" class="float-left text-sm">← Back</button><br>
            <h2 class="font-bold text-xl py-4">GTPS SERVER TYPE</h2>
            <button onclick="openMaker('GTPS GROWSOFT LUA')" class="w-full card p-8 mb-3 hover:border-blue-500">
                <p class="font-bold text-lg text-blue-400">GROWSOFT</p>
                <p class="text-[10px] text-gray-500">Sistem Cloud / Growcloud</p>
            </button>
            <button onclick="openMaker('GTPS RDP/VPS LUA')" class="w-full card p-8 hover:border-white">
                <p class="font-bold text-lg text-white">RDP / VPS</p>
                <p class="text-[10px] text-gray-500">Standard Enet/Proton</p>
            </button>
        </div>

        <div id="screen-converter" class="hidden space-y-4">
            <button onclick="showScreen('screen-home')" class="text-sm">← Back</button>
            <div class="card p-6 text-center space-y-4">
                <h2 class="font-bold text-yellow-500">AI CONVERTER</h2>
                <select id="conv-type" class="w-full p-3 bg-black border border-[#30363d] rounded-lg text-sm">
                    <option>YouTube to MP4</option>
                    <option>YouTube to MP3</option>
                    <option>IMG to RTTEX</option>
                    <option>BIN/CUE to VCD</option>
                </select>
                <input type="text" placeholder="Masukkan Link..." class="w-full p-3 bg-black border border-[#30363d] rounded-lg text-sm">
                <button onclick="alert('Fitur ini memerlukan API converter khusus. Gunakan AI Maker untuk membuat logikanya!')" class="w-full bg-yellow-600 p-3 rounded-lg font-bold text-black">PROCESS</button>
            </div>
        </div>

    </div>

    <script>
        // Inisialisasi
        const savedKey = localStorage.getItem('api_key');
        if(savedKey) {
            document.getElementById('api-key').value = savedKey;
            updateStatus(true);
        }

        function showScreen(id) {
            document.querySelectorAll('#app > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function saveConfig() {
            const key = document.getElementById('api-key').value.trim();
            if(!key) return alert("Key tidak boleh kosong!");
            localStorage.setItem('api_key', key);
            updateStatus(true);
            showScreen('screen-home');
        }

        function updateStatus(active) {
            const chip = document.getElementById('status-chip');
            if(active) {
                chip.innerText = "CONNECTED";
                chip.className = "text-[10px] bg-green-900 text-green-200 px-2 py-1 rounded font-bold";
            }
        }

        function openMaker(title) {
            if(!localStorage.getItem('api_key')) return alert("Setting API Key dulu!");
            document.getElementById('maker-title').innerText = title;
            document.getElementById('output-area').innerText = "Silahkan ketik permintaan anda...";
            document.getElementById('prompt-input').value = "";
            showScreen('screen-maker');
        }

        async function generateAI() {
            const key = localStorage.getItem('api_key');
            const title = document.getElementById('maker-title').innerText;
            const input = document.getElementById('prompt-input').value;
            const output = document.getElementById('output-area');
            const btn = document.getElementById('gen-btn');
            const loader = document.getElementById('ai-loading');

            if(!input) return alert("Request tidak boleh kosong!");

            btn.disabled = true;
            btn.innerText = "THINKING...";
            loader.classList.remove('hidden');
            output.innerText = "Menghubungkan ke Gemini AI...";

            // MODUL BYPASS CORS (Gunakan endpoint resmi v1)
            const url = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${key}`;

            const payload = {
                contents: [{
                    parts: [{
                        text: `Kamu adalah asisten ahli untuk ${title}. Tugasmu: ${input}. Berikan kode lengkap atau penjelasan yang sangat teknis.`
                    }]
                }]
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();

                if(data.error) {
                    throw new Error(data.error.message);
                }

                if(data.candidates && data.candidates[0].content) {
                    output.innerText = data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error("Respon AI kosong. Coba lagi.");
                }

            } catch (err) {
                output.innerText = "❌ ERROR: " + err.message + 
                "\n\nTips:\n1. Pastikan API KEY benar.\n2. Jika kamu di HP, gunakan Browser Chrome.\n3. Coba aktifkan VPN jika masih gagal.";
            } finally {
                btn.disabled = false;
                btn.innerText = "GENERATE";
                loader.classList.add('hidden');
            }
        }

        function copyResult() {
            const text = document.getElementById('output-area').innerText;
            navigator.clipboard.writeText(text);
            alert("Berhasil disalin!");
        }
    </script>
</body>
</html>
