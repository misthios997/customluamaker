<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI MAKER HUB - FINAL FIXED</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        body { background: #09090b; color: #f4f4f5; font-family: 'Inter', sans-serif; }
        .card-node { background: #18181b; border: 1px solid #27272a; border-radius: 16px; cursor: pointer; transition: 0.2s; }
        .card-node:hover { border-color: #3b82f6; background: #1c1c21; }
        .btn-action { background: linear-gradient(135deg, #3b82f6, #8b5cf6); border-radius: 12px; transition: 0.2s; }
        .btn-action:active { transform: scale(0.98); opacity: 0.8; }
        .shimmer { background: linear-gradient(90deg, #18181b 25%, #27272a 50%, #18181b 75%); background-size: 200% 100%; animation: load 1.5s infinite linear; }
        @keyframes load { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="p-4 md:p-10">

    <div id="app" class="max-w-2xl mx-auto space-y-6">
        
        <header id="header-home" class="text-center py-4">
            <h1 class="text-4xl font-black italic tracking-tighter">AI MAKER HUB</h1>
            <p class="text-blue-500 text-[10px] font-bold tracking-[0.4em] uppercase mt-2">Professional Script Engine</p>
        </header>

        <div id="screen-home" class="space-y-4">
            <button onclick="showScreen('screen-settings')" class="w-full card-node p-4 flex justify-between items-center border-dashed border-gray-600">
                <span class="text-xs font-bold text-gray-400 underline italic uppercase">⚙️ API CONFIGURATION</span>
                <span id="status-key" class="text-[10px] text-red-500 font-bold uppercase italic">OFFLINE</span>
            </button>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div onclick="openMaker('ROBLOX CUSTOM LUA MAKER', 'Script untuk executor (Codex, Delta, dll)')" class="card-node p-5">
                    <h3 class="font-bold text-blue-400 text-sm">ROBLOX LUA MAKER</h3>
                    <p class="text-[9px] text-gray-500 mt-1 italic">(Script Executor)</p>
                </div>
                <div onclick="openMaker('GROWTOPIA CUSTOM LUA MAKER', 'Script GrowLauncher/Genta Hax')" class="card-node p-5">
                    <h3 class="font-bold text-green-400 text-sm">GROWTOPIA LUA MAKER</h3>
                    <p class="text-[9px] text-gray-500 mt-1 italic">(GrowLauncher/Genta)</p>
                </div>
                <div onclick="openMaker('AI MAKER CUSTOM IMAGE', 'Generate gambar visual nyata (ANTI-LIMIT)')" class="card-node p-5 border-l-4 border-purple-500">
                    <h3 class="font-bold text-purple-400 text-sm">AI MAKER CUSTOM IMAGE</h3>
                    <p class="text-[9px] text-gray-500 mt-1 italic">Multi-Engine Bypass</p>
                </div>
                <div onclick="showScreen('screen-converter')" class="card-node p-5">
                    <h3 class="font-bold text-yellow-500 text-sm">AI CONVERTER</h3>
                </div>
                <div onclick="openMaker('AI GAME ASET MAKER', 'Membuat aset game: Image, RTTEX, XML')" class="card-node p-5">
                    <h3 class="font-bold text-sm">AI GAME ASET MAKER</h3>
                </div>
                <div onclick="openMaker('AI SCRIPT MAKER', 'Universal: Web, GG, Python, C++, dll')" class="card-node p-5">
                    <h3 class="font-bold text-indigo-400 text-sm">AI SCRIPT MAKER</h3>
                </div>
                <div onclick="showScreen('screen-gtps-choice')" class="card-node p-5 border-l-4 border-orange-500">
                    <h3 class="font-bold text-sm">AI GTPS LUA MAKER</h3>
                </div>
                <div onclick="openMaker('AI ROBLOX GAME MAKER', 'Bantuan untuk Developer Game Roblox')" class="card-node p-5">
                    <h3 class="font-bold text-sm">AI ROBLOX GAME MAKER</h3>
                </div>
            </div>
        </div>

        <div id="screen-settings" class="hidden space-y-4">
            <button onclick="showScreen('screen-home')" class="text-sm text-gray-500 font-bold uppercase">[ ← Back ]</button>
            <div class="card-node p-6 space-y-4 cursor-default border-blue-500/50">
                <h2 class="font-bold italic underline">KONFIGURASI SISTEM:</h2>
                <div>
                    <label class="text-[10px] text-gray-400 font-bold uppercase">Masukkan Gemini API Key:</label>
                    <input type="password" id="input-api" placeholder="Paste key di sini..." class="w-full mt-2 p-4 bg-black border border-gray-800 rounded-xl outline-none text-sm text-blue-400">
                </div>
                <button onclick="saveApiKey()" class="w-full btn-action p-4 text-white font-black uppercase italic tracking-widest">AKTIFKAN AI</button>
            </div>
        </div>

        <div id="screen-maker" class="hidden space-y-4">
            <div class="flex justify-between items-center">
                <button id="btn-back-maker" onclick="showScreen('screen-home')" class="text-sm text-gray-500 font-bold uppercase">[ ← Back ]</button>
                <h2 id="maker-title" class="font-black text-xs text-blue-500 uppercase italic underline"></h2>
            </div>
            <div class="space-y-4">
                <textarea id="maker-prompt" rows="5" class="w-full p-4 bg-black border border-gray-800 rounded-xl outline-none text-sm text-white focus:border-blue-600" placeholder="Ketik permintaan anda..."></textarea>
                <button onclick="startGenerating()" id="btn-gen" class="w-full btn-action p-4 text-white font-black uppercase italic tracking-tighter">Generate Result</button>
                
                <div class="space-y-2">
                    <div class="flex justify-between items-center px-1">
                        <span class="text-[10px] font-bold text-gray-400 uppercase italic underline">Hasil Output:</span>
                        <button id="btn-copy" onclick="copyToClipboard()" class="text-[10px] font-bold bg-blue-900/30 text-blue-400 px-4 py-1 rounded-md border border-blue-500/30">COPY RESULT</button>
                    </div>
                    <pre id="box-text" class="w-full p-5 bg-[#010101] border border-gray-900 rounded-xl font-mono text-[11px] text-green-500 overflow-x-auto min-h-[300px] whitespace-pre-wrap">Menunggu input...</pre>
                    <div id="box-img" class="hidden w-full p-1 bg-gray-900 rounded-xl border border-gray-800">
                        <img id="img-output" class="w-full rounded-lg" src="" alt="AI Output">
                    </div>
                </div>
            </div>
        </div>

        <div id="screen-gtps-choice" class="hidden space-y-4 text-center">
            <button onclick="showScreen('screen-home')" class="float-left text-sm text-gray-500 font-bold uppercase">[ Back ]</button><br>
            <h2 class="text-lg font-bold italic py-6 uppercase underline">Pilih Versi GTPS:</h2>
            <div onclick="openMaker('GTPS GROWSOFT', 'Sistem script Cloud Growsoft')" class="card-node p-8 border-blue-500">
                <h3 class="font-bold text-blue-400 text-lg">GROWSOFT</h3>
            </div>
            <div onclick="openMaker('GTPS RDP/VPS', 'Sistem script Enet/Proton')" class="card-node p-8 border-gray-800">
                <h3 class="font-bold text-lg text-gray-400">RDP / VPS</h3>
            </div>
        </div>

        <div id="screen-converter" class="hidden space-y-4">
            <button onclick="showScreen('screen-home')" class="text-sm text-gray-500 font-bold uppercase">[ Back ]</button>
            <div class="card-node p-6 space-y-4 text-center cursor-default">
                <h2 class="font-bold italic text-yellow-500 uppercase underline">Converter Media:</h2>
                <select class="w-full p-4 bg-black border border-gray-800 rounded-xl text-sm italic outline-none text-white">
                    <option>Youtube to MP4</option>
                    <option>Youtube to MP3</option>
                    <option>Image to RTTEX</option>
                    <option>Bin to VCD</option>
                </select>
                <input type="text" placeholder="Masukkan Link..." class="w-full p-4 bg-black border border-gray-800 rounded-xl text-sm italic">
                <button onclick="alert('Fitur ini sedang dalam maintenance.')" class="w-full bg-yellow-600 p-4 rounded-xl font-black text-black uppercase text-xs">PROCESS</button>
            </div>
        </div>

    </div>

    <script>
        // 1. Inisialisasi Data
        const savedKey = localStorage.getItem('hub_key');
        if(savedKey) {
            document.getElementById('input-api').value = savedKey;
            const status = document.getElementById('status-key');
            status.innerText = "ONLINE";
            status.className = "text-[10px] text-green-500 font-bold uppercase italic";
        }

        // 2. Fungsi Navigasi (Show/Hide Screen)
        function showScreen(id) {
            const screens = ['screen-home', 'screen-settings', 'screen-maker', 'screen-gtps-choice', 'screen-converter'];
            screens.forEach(s => document.getElementById(s).classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            
            // Header hanya tampil di Home
            if(id === 'screen-home') document.getElementById('header-home').classList.remove('hidden');
            else document.getElementById('header-home').classList.add('hidden');
            window.scrollTo(0,0);
        }

        // 3. Simpan API Key
        function saveApiKey() {
            const val = document.getElementById('input-api').value.trim();
            if(!val) return alert("API Key tidak boleh kosong!");
            localStorage.setItem('hub_key', val);
            alert("API Key Berhasil Disimpan!");
            location.reload();
        }

        // 4. Buka Maker (Setup Tampilan)
        function openMaker(title, desc) {
            if(!localStorage.getItem('hub_key')) return alert("Wajib setting API Key dulu!");
            
            document.getElementById('maker-title').innerText = title;
            document.getElementById('maker-prompt').value = "";
            document.getElementById('box-text').innerText = "Silahkan ketik deskripsi fitur yang ingin dibuat...";
            
            // Reset Tampilan Output
            document.getElementById('box-text').classList.remove('hidden');
            document.getElementById('box-img').classList.add('hidden');
            document.getElementById('btn-copy').classList.remove('hidden');
            
            // Logika Back Button
            const backBtn = document.getElementById('btn-back-maker');
            if(title.includes('GTPS')) backBtn.setAttribute('onclick', "showScreen('screen-gtps-choice')");
            else backBtn.setAttribute('onclick', "showScreen('screen-home')");

            showScreen('screen-maker');
        }

        // 5. Eksekusi AI
        async function startGenerating() {
            const key = localStorage.getItem('hub_key');
            const prompt = document.getElementById('maker-prompt').value;
            const title = document.getElementById('maker-title').innerText;
            
            const btn = document.getElementById('btn-gen');
            const outText = document.getElementById('box-text');
            const outImgBox = document.getElementById('box-img');
            const outImg = document.getElementById('img-output');
            const copyBtn = document.getElementById('btn-copy');

            if(!prompt) return alert("Ketik sesuatu!");

            btn.disabled = true;
            btn.innerText = "PROCESSING AI...";
            outText.innerText = "Sistem sedang memproses, mohon tunggu...";
            outText.classList.add('shimmer');

            // --- LOGIKA JIKA IMAGE MAKER ---
            if(title === 'AI MAKER CUSTOM IMAGE') {
                const randomSeed = Math.floor(Math.random() * 100000);
                const time = new Date().getTime();
                const imgUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?seed=${randomSeed}&width=1024&height=1024&nologo=true&t=${time}`;
                
                outText.classList.add('hidden');
                copyBtn.classList.add('hidden');
                outImgBox.classList.remove('hidden');
                
                outImg.src = imgUrl;
                outImg.onload = () => {
                    btn.disabled = false;
                    btn.innerText = "Generate Result";
                };
                return;
            }

            // --- LOGIKA TEKS (GEMINI BYPASS) ---
            const apiModels = [
                "v1beta/models/gemini-1.5-flash",
                "v1/models/gemini-pro"
            ];

            let isDone = false;
            for(let model of apiModels) {
                if(isDone) break;
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/${model}:generateContent?key=${key}`, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: `Role: Expert for ${title}. Request: ${prompt}. Berikan kode/jawaban lengkap.` }] }]
                        })
                    });
                    const data = await response.json();
                    if(data.candidates) {
                        outText.innerText = data.candidates[0].content.parts[0].text;
                        isDone = true;
                    }
                } catch (e) {}
            }

            if(!isDone) outText.innerText = "❌ ERROR: Gagal terhubung ke AI.\n1. Pastikan API Key Benar.\n2. Coba gunakan VPN (IP Terblokir).";
            
            btn.disabled = false;
            btn.innerText = "Generate Result";
            outText.classList.remove('shimmer');
        }

        // 6. Fungsi Copy
        function copyToClipboard() {
            const text = document.getElementById('box-text').innerText;
            if(text.includes("Menunggu") || text.includes("memproses")) return;
            
            navigator.clipboard.writeText(text).then(() => {
                alert("Berhasil disalin ke clipboard!");
            }).catch(err => {
                // Fallback jika navigator gagal
                const el = document.createElement('textarea');
                el.value = text;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                alert("Berhasil disalin!");
            });
        }
    </script>
</body>
</html>
