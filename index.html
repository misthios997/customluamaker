<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI MAKER HUB - MULTI-MODEL SUPPORT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        body { transition: background-color 0.3s, color 0.3s; scroll-behavior: smooth; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .loading-shimmer { background: linear-gradient(90deg, #1f2937 25%, #374151 50%, #1f2937 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        .success-glow { box-shadow: 0 0 15px rgba(34, 197, 94, 0.5); border-color: #22c55e !important; }
    </style>
</head>
<body class="bg-[#0b0e14] text-gray-200 font-sans min-h-screen">

    <div id="app" class="max-w-xl mx-auto p-4 pb-20">
        
        <header class="text-center py-10">
            <h1 class="text-4xl font-black tracking-tighter text-white uppercase italic">
                AI <span class="text-blue-500">Maker</span> Hub
            </h1>
            <div id="status-badge" class="mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-red-500/10 border border-red-500/50 text-[10px] text-red-500 font-bold uppercase">
                <span class="h-2 w-2 rounded-full bg-red-500 animate-pulse"></span> No API Key
            </div>
        </header>

        <div id="screen-home" class="space-y-3">
            <button onclick="showScreen('screen-settings')" class="w-full glass p-4 rounded-2xl flex justify-between items-center hover:bg-white/5 transition border-l-4 border-blue-500">
                <div class="text-left">
                    <p class="text-xs text-gray-400 font-bold uppercase tracking-widest">Configuration</p>
                    <p class="font-bold text-white">‚öôÔ∏è API & SYSTEM SETTINGS</p>
                </div>
                <span>‚Üí</span>
            </button>
            
            <div class="grid gap-3 pt-4">
                <button onclick="showScreen('screen-request', 'ROBLOX CUSTOM LUA MAKER')" class="bg-[#1e293b] p-5 rounded-2xl font-bold text-left border border-gray-800 hover:border-blue-500 transition">
                    üéÆ ROBLOX LUA MAKER
                    <span class="block text-[10px] font-normal text-gray-500 mt-1 italic">(Script for Executors)</span>
                </button>

                <button onclick="showScreen('screen-request', 'GROWTOPIA CUSTOM LUA MAKER')" class="bg-[#1e293b] p-5 rounded-2xl font-bold text-left border border-gray-800 hover:border-green-500 transition">
                    üåç GROWTOPIA LUA MAKER
                    <span class="block text-[10px] font-normal text-gray-500 mt-1 italic">(GrowLauncher / Genta Hax)</span>
                </button>

                <button onclick="showScreen('screen-request', 'AI MAKER CUSTOM IMAGE')" class="bg-[#1e293b] p-5 rounded-2xl font-bold text-left border border-gray-800 hover:border-purple-500 transition">üé® CUSTOM IMAGE PROMPT</button>
                <button onclick="showScreen('screen-converter')" class="bg-[#1e293b] p-5 rounded-2xl font-bold text-left border border-gray-800 hover:border-yellow-500 transition text-yellow-500">üîÑ AI CONVERTER</button>
                <button onclick="showScreen('screen-request', 'AI SCRIPT MAKER')" class="bg-[#1e293b] p-5 rounded-2xl font-bold text-left border border-gray-800 hover:border-indigo-500 transition">üíª UNIVERSAL SCRIPT MAKER</button>
                <button onclick="showScreen('screen-gtps-choice')" class="bg-[#1e293b] p-5 rounded-2xl font-bold text-left border border-gray-800 hover:border-orange-500 transition">üíé AI GTPS LUA MAKER</button>
            </div>
        </div>

        <div id="screen-settings" class="hidden space-y-6">
            <h2 class="text-2xl font-bold">SETTINGS</h2>
            <div class="glass p-6 rounded-3xl space-y-4">
                <div>
                    <label class="text-xs font-bold text-gray-500 uppercase">Gemini API Key</label>
                    <input type="password" id="api-key" placeholder="Paste key from AI Studio..." class="w-full mt-2 p-4 rounded-xl bg-black border border-gray-800 focus:border-blue-500 outline-none">
                </div>
                <div>
                    <label class="text-xs font-bold text-gray-500 uppercase italic">Current Version: v2.5 (Stable)</label>
                </div>
                <button onclick="saveSettings()" class="w-full bg-blue-600 p-4 rounded-xl font-black">SAVE & CONNECT</button>
                <button onclick="showScreen('screen-home')" class="w-full text-sm text-gray-500">Cancel</button>
            </div>
        </div>

        <div id="screen-request" class="hidden space-y-4">
            <div class="flex items-center gap-3">
                <button onclick="goBack()" class="p-2 text-gray-400 italic">‚Üê Back</button>
                <h2 id="req-title" class="font-bold text-blue-400 uppercase tracking-widest text-sm"></h2>
            </div>
            
            <div class="space-y-4">
                <textarea id="req-input" rows="6" placeholder="Contoh: Buatkan script auto farm untuk map simulator..." class="w-full p-5 rounded-2xl bg-[#1a1f26] border border-gray-800 focus:border-blue-500 outline-none"></textarea>
                
                <button onclick="startAiProcess()" id="btn-gen" class="w-full bg-white text-black p-4 rounded-2xl font-black uppercase tracking-tighter active:scale-95 transition">
                    Generate Result
                </button>

                <div class="space-y-2">
                    <div class="flex justify-between items-center px-1 text-[10px] font-bold text-gray-500 uppercase">
                        <span>Output AI:</span>
                        <div id="model-used" class="text-blue-500 italic">Ready</div>
                    </div>
                    <pre id="req-result" class="w-full p-5 rounded-2xl bg-black border border-gray-900 text-green-500 font-mono text-xs overflow-x-auto whitespace-pre-wrap min-h-[200px]">Waiting for request...</pre>
                    <button onclick="copyText()" class="w-full py-2 text-xs bg-gray-800 rounded-lg text-gray-300">Copy to Clipboard</button>
                </div>
            </div>
        </div>

        <div id="screen-gtps-choice" class="hidden space-y-4 text-center">
            <button onclick="showScreen('screen-home')" class="float-left p-2 text-gray-400">‚Üê Back</button><br><br>
            <h2 class="text-xl font-bold italic">PILIH ENGINE GTPS</h2>
            <div class="grid gap-4 mt-6">
                <button onclick="showScreen('screen-request', 'Growsoft (GTPS CLOUD)')" class="p-8 rounded-3xl bg-blue-900/30 border border-blue-500/40 hover:bg-blue-800/40 transition">
                    <p class="font-black text-blue-400 text-lg">GROWSOFT</p>
                    <p class="text-[10px] text-gray-400 italic">Sistem Cloud Scripting</p>
                </button>
                <button onclick="showScreen('screen-request', 'RDP VPS Script Maker')" class="p-8 rounded-3xl bg-gray-800 border border-gray-700 hover:bg-gray-700 transition">
                    <p class="font-black text-white text-lg">RDP / VPS</p>
                    <p class="text-[10px] text-gray-400 italic">Enet / Proton Standard</p>
                </button>
            </div>
        </div>

        <div id="screen-converter" class="hidden space-y-4 text-center">
            <button onclick="showScreen('screen-home')" class="float-left p-2 text-gray-400">‚Üê Back</button><br><br>
            <div class="glass p-8 rounded-3xl border-yellow-500/20">
                <h2 class="text-xl font-bold text-yellow-500 uppercase italic underline">AI Converter</h2>
                <div class="mt-6 space-y-4">
                    <select id="conv-type" class="w-full p-4 bg-black border border-gray-800 rounded-xl outline-none text-sm">
                        <option>Youtube to MP4/MP3</option>
                        <option>TikTok No Watermark</option>
                        <option>IMG to RTTEX (Growtopia)</option>
                        <option>BIN to VCD / CUE to VCD</option>
                    </pre>
                    <input type="text" placeholder="Masukkan link atau perintah..." class="w-full p-4 bg-gray-900 border border-gray-800 rounded-xl text-sm italic">
                    <button onclick="alert('Gunakan menu AI SCRIPT MAKER untuk membuat kode converter otomatis!')" class="w-full bg-yellow-600 p-4 rounded-xl font-black text-black">PROCESS & DOWNLOAD</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // List model yang akan dicoba secara berurutan
        const MODEL_LIST = [
            "gemini-1.5-flash",
            "gemini-1.5-pro",
            "gemini-pro"
        ];

        function showScreen(id, title = '') {
            const key = localStorage.getItem('gemini_api_key');
            if (id !== 'screen-home' && id !== 'screen-settings' && !key) {
                alert('‚ö†Ô∏è ERROR: Tolong isi API KEY di menu SETTINGS dulu!');
                return;
            }
            document.querySelectorAll('#app > div').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if(title) {
                document.getElementById('req-title').innerText = title;
                document.getElementById('req-result').innerText = "Ketik permintaan anda di atas...";
                document.getElementById('model-used').innerText = "Ready";
            }
            window.scrollTo(0,0);
        }

        function goBack() {
            const t = document.getElementById('req-title').innerText;
            if(t.includes('Growsoft') || t.includes('RDP')) showScreen('screen-gtps-choice');
            else showScreen('screen-home');
        }

        function saveSettings() {
            const val = document.getElementById('api-key').value.trim();
            if(!val) return alert('API Key tidak boleh kosong!');
            localStorage.setItem('gemini_api_key', val);
            updateStatusBadge();
            showScreen('screen-home');
        }

        function updateStatusBadge() {
            const key = localStorage.getItem('gemini_api_key');
            const badge = document.getElementById('status-badge');
            if(key) {
                badge.className = "mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-500/10 border border-green-500/50 text-[10px] text-green-500 font-bold uppercase";
                badge.innerHTML = `<span class="h-2 w-2 rounded-full bg-green-500"></span> API CONNECTED`;
            }
        }

        async function startAiProcess() {
            const key = localStorage.getItem('gemini_api_key');
            const title = document.getElementById('req-title').innerText;
            const input = document.getElementById('req-input').value;
            const resBox = document.getElementById('req-result');
            const btn = document.getElementById('btn-gen');
            const modelStatus = document.getElementById('model-used');

            if(!input) return alert('Ketik request dulu bosku!');

            btn.disabled = true;
            btn.innerText = "Processing...";
            resBox.innerText = "Mencoba menghubungi AI...";
            resBox.classList.add('loading-shimmer');

            // Payload Dasar
            const sysPrompt = `Kamu adalah pakar ${title}. User Request: ${input}. Berikan jawaban teknis, kode script lengkap, atau instruksi langkah demi langkah.`;

            // Loop mencoba berbagai model
            let success = false;
            for (let modelName of MODEL_LIST) {
                if (success) break;
                
                modelStatus.innerText = `Trying ${modelName}...`;
                
                try {
                    // Coba Versi v1 (Produksi)
                    const url = `https://generativelanguage.googleapis.com/v1/models/${modelName}:generateContent?key=${key}`;
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: sysPrompt }] }] })
                    });

                    const data = await response.json();

                    if (data.candidates && data.candidates[0].content.parts[0].text) {
                        resBox.innerText = data.candidates[0].content.parts[0].text;
                        modelStatus.innerText = `Success: ${modelName}`;
                        success = true;
                    }
                } catch (e) {
                    console.log(`${modelName} failed, trying next...`);
                }
            }

            if (!success) {
                resBox.innerText = "‚ùå SEMUA MODEL GAGAL!\n\nKemungkinan penyebab:\n1. API Key salah.\n2. Kuota API gratis habis.\n3. Koneksi internet diblokir Google.\n\nSaran: Cek API Key di AI Studio Google atau gunakan VPN.";
                modelStatus.innerText = "Failed";
            }

            btn.disabled = false;
            btn.innerText = "Generate Result";
            resBox.classList.remove('loading-shimmer');
        }

        function copyText() {
            const text = document.getElementById('req-result').innerText;
            navigator.clipboard.writeText(text);
            alert('Code berhasil disalin!');
        }

        // Jalankan saat startup
        updateStatusBadge();
        if(localStorage.getItem('gemini_api_key')) {
            document.getElementById('api-key').value = localStorage.getItem('gemini_api_key');
        }
    </script>
</body>
</html>
